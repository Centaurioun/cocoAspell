#!/bin/bash -f

#	Copyright (c) 2005-2009 Anton Leuski.
#
#	This file is part of cocoAspell package.
#
#	THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED 
#	WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF 
#	MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT 
#	SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, 
#	EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT 
#	OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS 
#	INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, 
#	STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY 
#	OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
#
#	This script checks and installs the make utility

cd /usr/bin 

echo "checking if make is here..." >> /tmp/cocoAspell.install.log
echo "receipt path: ${INSTALLER_TEMP}"  >> /tmp/cocoAspell.install.log
ls ${INSTALLER_TEMP} >> /tmp/cocoAspell.install.log

if [ -f make ]
then
	echo "yes, we have make. quitting..." >> /tmp/cocoAspell.install.log
	exit 0
fi

echo "no, no make. Do we have gnumake?" >> /tmp/cocoAspell.install.log

if [ -f gnumake ]
then
	echo "yes, we have gnumake. Archiving it..." >> /tmp/cocoAspell.install.log
	current_time=`date "+gnumake-%Y-%m-%d-%H-%M-%S"`
	mv gnumake "$current_time"
fi

echo "Installing make" >> /tmp/cocoAspell.install.log

osVers=`sw_vers -productVersion`
if [ "$osVers" \< "10.6" ] 
then  
	tar -xpf "${INSTALLER_TEMP}/make-5.tar" -C /usr/bin
else
	tar -xpf "${INSTALLER_TEMP}/make-6.tar" -C /usr/bin
fi


exit 0

